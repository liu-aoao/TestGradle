apply plugin: 'java'
apply plugin: 'application'

ext.projectIds = ['group': 'com.aoao.TestGradle', 'version': '0.1.0']
group = projectIds.group
version = projectIds.version

mainClassName = "com.aoao.TestGradle.module3.Run"

buildscript {
    if (System.getenv('CIRCLECI')) {
        ext.artifactoryUsername = System.getenv('ARTIFACTORY_USERNAME')
        ext.artifactoryPassword = System.getenv('ARTIFACTORY_PASSWORD')
    }
}

allprojects {
    it.repositories {
        mavenCentral()
//        maven {
//            url "https://snapchat.artifactoryonline.com/snapchat/plugins"
//            credentials {
//                if (System.getenv('CIRCLECI')) {
//                    username = artifactoryUsername
//                    password = artifactoryPassword
//                    println "I'm here, username = $username, password = $password"
//                }
//                else {
//                    username = "Yunao.Liu"
//                    password = "Snapchat1"
//                    println "I'm here, username = $username, password = $password"
//                }
//            }
//        }
    }
}

project(':module1') {
    group = projectIds.group
    version = projectIds.version
}

project(':module2') {
    group = projectIds.group
    version = projectIds.version
    apply plugin: 'java'

    dependencies {
        compile project(':module1')
    }
}

project(':module3') {
    group = projectIds.group
    version = projectIds.version
    apply plugin: 'java'

    dependencies {
        compile project(':module1')
        compile project(':module2')
    }
}


task resolveAllDependencies() << {
    subprojects {
        it.dependencies()
    }
}


task wrapper(type: Wrapper) {
    gradleVersion = '2.3'
}

